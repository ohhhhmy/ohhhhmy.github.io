---
layout: post
title: 컴퓨터 네트워크 실습 WEB과  HTTP
date: 2021-03-17
author: OH
categories: ComputerNetworking
---

#### 오늘의 주제 : WEB과 HTTP 



**WEB**  

웹 페이지 = object로 표현됨(file, 그림, java applet 등...)  -> Web server에 저장이 되어있음  

HTML file 기반으로 다른 파일들을 참조하여 (by URL) 웹 페이지를 보여줌.  



**HTTP**   

hypertext transfer protocol.  

WEB의 어플리케이션 계층의 프로토콜이며 client/server 모델이다.  

client : 브라우저. Web의 object들을 요청하고 서버로부터 받고 보여주는 역할.  

server : Web server. client가 요청하면 HTTP 프로토콜을 사용해 전송.  

서로 다른 브라우저를 사용해도 브라우저들과 서버가 HTTP protocol에 맞춰 구현을 했다면 다른 브라우저라도 서비스 제공이 가능.  





**HTTP는 TCP를 사용한다**  

- client가 TCP 연결 요청, port는 80
- server가 TCP 요청 accept. 
- HTTP 메시지 주고받을 수 있음(브라우저 - 서버)
- TCP 연결 닫힘



**HTTP is stateless**  

상태를 보관하지 않는다!  

서버 입장에서 과거의 state 저장하지 X  

어떤 클라이언트가 전에 요청했던 정보를 또 요청해도 그런 정보 저장하지 않는다.



** stateful일 경우:

- state 유지하는 것 굉장히 복잡함.
- path history가 저장되어야 하는데 매우 어려움. 클라이언트/서버가 언제든 죽을 수 있기 때문. 통신을 하다 문제가 생길 수 있는데 그 순간에 state가 일관성 없는 상태가 될 수 있음



**HTTP 연결의 두 가지 타입**  

- Non-persistent HTTP (요청 올 때마다 연결하고 종료)
  - TCP connection 연결
  - 하나의 object를 TCP 통해 요청/전달(한 html 파일이 10개의 파일을 참조한다면 연결 요청 - 응답 과정을 반복함)
  - TCP 연결 종료
  - 동시에 여러 개 object 받기 위해서는 여러 개의 connection 사용
- Persistent HTTP (연결을 영구적으로 유지)
  - TCP connection 연결
  - 한 번 연결되면 여러 개의 object 주고 받을 수 있음.
  - TCP 연결 종료



** RTT(Rount Trip Time)  

왕복하는데 걸린 시간.  

TCP 요청하고 응답이 돌아오기까지.  



** HTTP response time  

connection 과정에서 1 RTT  

+

HTTP 요청과정에서 1 RTT (몇 바이트 정도의 HTTP 응답 back)  

+

object/file 전송 시간    

= HTTP response time  



**Non-persistent HTTP가 가진 이슈**  

- object 마다 2RTT가 필요
- TCP 연결마다 OS의 오버헤드 발생
- 브라우저는 가끔 병렬적으로 TCP 연결을 요청함(여러 개의 object 요청하기 위해)  



**Persistent HTTP를 쓴다면**  

- 서버가 connection을 끊지 않고 유지
- HTTP 메시지가 같은 client에 대해 오면 connection을 그대로 재사용해 주고받음
- client는 connection이 열려있는 상태에서 referenced object를 발견하자마자 request를 최대한 빨리 보냄. (최대한 빠르게 메시지를 주고받는다는 뜻)
- 거의 1RTT만큼밖에 걸리지 않음. connection을 재사용하기에



 질문  & 실강

1. client는 connection이 열려있는 상태에서 referenced object를 발견하자마자 request를 최대한 빨리 보냄이 무슨 의미?



실강  

1. LMS 질의응답 대신 github issue를 사용할 예정(마크다운 문법 지원)



질문들

1. 디바이스 패킷 스위치 커뮤니케이션 링크 네트워크 엣지 엑세스 네트워크 물리 미디어 네트워크 코어의 관계?

   디바이스 패킷 스위치 커뮤니케이션 링크는 물리적으로 나눈 것.  

   커뮤니케이션 링크 = 물리적인 매체, 연결 수단 등

   

   네트워크 엣지와 액세스 네트워크 물리 미디어 네트워크 코어는 개념적으로 나눈 것.  

   끝 부분에 있는 것, 중심에 있는 것, 중간에 이어지는 것들 등  

   액세스 네트워크 = 엣지에서부터 코어까지 가는데 있어 가장 1번 라우터까지 가는 것을(네트워크 세계로 가는 첫 번째 문을 만나는 지점)  

   유선이든 무선이든 네트워크 엣지 - 코어 연결  

   

2. 엑세스 네트워크에서 케이블 based와 digital subscriber line 두 가지 종류만 있음?

   실제 하나 더 있음. FTTH(Fiber To The Home)  

   기가 광랜 선전하는거 보면 그런데서 쓰는 엑세스 네트워크임.  

   실제로 딱 두 종류 있다고 할 순 없고 현재 기준으로 많이 사용되는 액세스 네트워크를 설명한 것이지 오래되어 없어진 것도 있을 수 있음. 대표적인 예를 설명한 것

3. home network와 enterprise network는 규모 측면에서 분류한건지 엑세스 네트워크 종류인건지?

   home과 enterprise도 일종의 예시인데 규모로 볼 수도 있고 home에서 꾸리는 네트워크를 예시로, enterprise는 기업같이 큰 규모에서 이렇게 구축한다를 말해주기 위함

4. DSL도 HFC 방식인지?

   DSL은 전화서비스를 위해 사용되던 기존 전화 회선을 사용(꼬임쌍선)  

   HFC 방식이 X  

   cable은 케이블 TV 기반 구조를 활용.  

   FTTH는 광섬유를 각 가정까지 가져오는 것.  



연습문제 관련 공지

1. 번역판과 원서 문제가 다르다. (이번 연습문제는 번역판과 원서 둘 다 인정하나 앞으로 연습문제는 원서 기준)  
2. 한글 번역판 문제가 명확하지 않다...  
3. 원서는 따로 구매할 필요는 X. 구글링하면 공개되어 있음.  



연습문제 풀이

P10.  

Mbps는 메가비트/초  

A는 6ms B는 2ms    

1500 Byte = 12000 bit  

링크 속도는 4Mbps  



transmission delay)  12000 / 4000000 = 0.003 초  

A에서는 6ms + 3ms = 9ms    

B에서는 2ms + 3ms = 5ms    



A에서 패킷이 다 전송되기 전에 B의 패킷이 도착. 1ms만 지나면 패킷이 온전히 도착. (좀 더 알아볼 것)  

A에서 보낸 패킷이 도착하기까지 2ms가 시간이 남은 것.  

도착하기 전에 처리가 되어 전송되면 큐잉 지연이 발생하지 않음.  

라우터에서 밖으로 나가는 transmission 속도가 없음. 이 값에 따라 이 값이 빠르게 패킷을 전송할 수 있느냐에 따라 큐잉될지 안될지가 결정됨.  



전파지연과 전송지연은 다름.  

전송지연은 엔드 포인트에서 완전히 나가는 것까지.  



꼭 더한다고는 볼 수 없음. 패킷이 온전히 미디어에 다 나올 때까지가 전송 지연인데 이게 3ms. 전파 지연은 첫 번째 비트가 나온 순간부터 도착하기까지.  

결국엔 동시에 시작되는 것.  

*그럼 10번 풀이할 때 전송 지연 + 전파 지연을 더한 이유는 동시에 시작되는걸 고려하지 않는 걸 전제하고 구한 것?*  

더하지 않았음!  

A가 6ms (전송이 3ms)

B가 2ms (전송이 3ms)  



패킷 전체가 엔드 포인트에서 다 나오면 전송이 끝인데 이게 3ms 걸린 것  

전파 지연이 6ms고.  



3ms가 지난 시점  

패킷은 다 나와있는데 반대편에 도착하기 전까지는 3ms가 남아있음  

전송과 전파는 겹친다.  



3ms가 지났을 때 를 기준으로

라우터에 패킷의 1/3이 아직 도착하지 않은 상태인 것임  



보내는 쪽에서 보내기 시작하는데 전송하는건 라우터에서 내보내기까지 걸리는 시간  



전파 지연은 physical media로 비트 단위로 전송  

10번 문제는 하나의 패킷 전송하는 것이라서 다르게 볼 수 있음. 하나의 패킷을 보고 두 개의 패킷이 겹칠지만 보면 됨.  

Q. 교수님 그러면 전송지연과 전파지연이 동시에 일어난다고 생각해야한다는 것이죠?

-> 다시 확인보겠음  





P11  

라우터에서 다음으로 얼마나 빠르게 전송하는지가 관건.  

방금 설명한 것처럼 전파지연이 굉장히 길다고 가정을 하면 전송을 빨리 하더라도 굉장히 패킷이 도착하는데 굉장히 오래 걸림. 다른애도 마찬가지.  

라우터쪽에 트랜스미션 딜레이와 계산을 해서 도착하는데 걸리는 시간보다 라우터쪽 트랜스미션 딜레이가 빠르면 됨.  



P24  

계산을 해보면  

150 km = 2.5 시간  

1.5GB 를 버스가 도착했을 때 탑승 후 100Mbps 와이파이 통해 전송하면 ... 

100Mbps = 12.5 M b/s  

1.5 GB / 12.5 MB = 120 즉 120초 = 2분 걸림.  



버스 타고 2.5 시간 걸려 1Gbps로 보낼 필요가 없음.  

와이파이 연결해서 보내는게 더 빠름.  

1Gbps = 100 Mbps의 10배  

전송 데이터가 테라바이트단위면 1Gbps가 더 빠를 수도 있음. 

(데이터를 모은다? USB로 받는 등 물리적으로 받아서 도시로 가서 인터넷으로 업로드를 한다.) 

(이걸 100Mbps WIFI를 통해 전송할 수 있다고 가정하면 버스 탑승하자마자 2분만에 전송이 가능함.)  



P27  

Server ----20 Mbps---- ROUTER ----10 Mbps---- CLIENT  



20Mbps가 패킷 2개 처리하는 동안 10Mbps는 1개 처리하는 꼴.  

서버에서 패킷 두개 --> 클라이언트에선 하나 처리 : 라우터엔 패킷 한개

서버에서 패킷 두개 --> 클라이언트에서 하나 처리 : 라우터엔 패킷 두개   

서버에서 패킷 두개 --> 클라이언트에서 하나 처리 : 라우터엔 패킷 세개   

서버에서 패킷 두개 --> 클라이언트에서 하나 처리 : 라우터엔 패킷 네개   

즉 9 개째 메시지 보낼 때 로스가 발생.  



라우터 안에는 서버쪽에 하나를 보낼 때마다 0.5개의 패킷이 쌓이는 것. 

(0.5개는 사실 올림을 해야 함)  

0.5n의 올림이 4보다 큰 경우를 찾으면 됨.  

8까지는 큐에 4개가 있어서 괜찮음.  

n이 9일 때 조건이 성립해 packet loss가 발생한다.  



P28

(올림)0.5n > m  

이걸 만족하는 가장 작은 n이 조건  



전파 + 전송 식으로 일반화되어 나와있는데 이걸 어떻게 이해해야 함??  

-> 조금 더 생각해보겠음  



겹칠 수가 식을 생각해보면 이상하니까 확인을 해보고 말씀주실 예정.  



답 맞추는게 핵심이 아닙니다.  

solution 참고는 하되 번역해서 내는건 의미가 없다.



배점은 크게 생각하지 않아도 됩니다  

전체적인 연습문제 낼 건데 종합해서 배점을 매길 것.  



수정 후 지각제출 : 지각제출은 가능한데 지각으로 감점되어도 크게 상관없게 할 예정. 문제 답 틀려도 괜찮은 것처럼.  



P5  

상단이 150km를 간다 = 요금소에서 요금소까지가 75km인 것  

요금소1에서 96초 + 요금소2에서 96초 + 요금소3에서 96초 



이동 시간 : 75 / 100 = 45분  



96 * 3 / 60 + 45 * 2 = 종단 간 지연  



R13

TDM도 똑같이 나눌 수 있음. 시간을 어떻게 나누든 두 명에게 똑같은 비율로 time slot 할당하여 사용 가능  

사용자가 1Mbps를 사용해야 하기 때문에 TDM 방식이더라도 3명 이상이 사용할 순 없음. 물론 아예 불가능하진 않을 것 같으나... 1Mbps를 만족시키는게 어려워질 것  

요구조건은 1Mbps를 요구할 때 준수해줘야 한다는 가정이 있으니 FDM이든 TDM이든 2명이라 생각하면 됨.  

회선 교환은 TDM이든 FDM이든 가정에서는 똑같음. 회선 교환 vs 패킷 교환 비교할 때 패킷을 써야 더 많은 사용자를 지원할 수 있다...  비교 대상을 할 때 회선은 FDM이든 TDM이든 둘 다 정해져있는 자원을 할당하여 사용하기에 시간을 할당하든 주파수를 할당하든 점유하기 때문에 얼마나 많은 사용자를 지원할 수 있느냐는 똑같음.  



TDM은 애초에 사용자 수가 정해져 있다.  

개수만큼만 시간을 분할해 나눠서 쓰는 것.  



**

점수가 크게 차이가 나진 않을 것입니다  

채점할 때 고려해서 할테니 걱정하지 마세요.  

오늘 수업 통해 이해했다면 다시 풀어서 제출하는게 좋다











