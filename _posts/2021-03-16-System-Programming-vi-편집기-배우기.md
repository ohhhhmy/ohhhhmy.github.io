---
layout: post
title: System Programming vi 편집기 배우기 
date: 2021-03-16
author: OH
categories: SystemProgramminig
---

### 오늘의 주제 : vi 편집기 배우기

**어렵지만 알고 싶었던... 그 편집기**

vi 편집기에 대해 알아보자. 나는 이걸 데이터베이스프로그래밍 수업 당시 csv 파일을 테이블로 가져오는 과정에서 써본 적이 있는데 굉장히 어렵고 뭘 눌러도 반응을 안하거나 알림음만 내뱉어서 당황만 한가득했었다. 시스템 프로그래밍 수업을 통해 제대로 배우게 되어 영광이다.  



#### 1. vi 편집기에는 두 가지 모드가 있다.

vi 편집기에는 두 가지 모드가 있는데 하나는 편집 모드, 또 하나는 명령어 모드다.  

편집 모드에선 메모장에 글을 쓰거나 코딩을 하듯 말 그대로 문서를 편집할 수 있고 명령어 모드에서는 파일을 저장하거나 커서를 옮기거나 파일의 몇 번째 라인으로 이동하거나 여러 가지 명령어를 사용할 수 있다.  

vi 편집기 실행은 `vi 파일이름`이다.  

예를 들어 vi a.c를 터미널에 입력하고 엔터를 땅 치면  

~  

~  

~  

~  

이렇게 물결이 주르르 흐르는 화면을 만나게 된다. 

이 화면이 바로 vi 편집기의 명령어 모드 화면이다. 그렇다. vi 편집기를 실행하면 기본적으로 명령어 모드로 실행된다.  



#### 2. 편집 하기

편집기를 실행했으니 이제 코드를 짜야 한다. 편집 모드로 들어가기 위해서는 명령어를 입력하면 되는데 명령어는 기본적으로 3가지가 있다.

- i - insert를 의미. 커서의 앞에서부터 편집을 시작한다.
- a - append를 의미. 커서의 뒤에서부터 편집을 시작한다.
- o - open을 의미. 커서 다음줄부터 편집을 시작한다.

물결이 흐르는 화면에서 i나 a, o 중 하나를 입력하면 바로 편집모드로 바뀐다. 터미널에 명령어 치듯 엔터를 칠 필요도 없다. 바로 시작된다 이 말이다.  



"그럼 편집 모드에서 명령어 모드로 이동하는건??"  

편집 모드에서 명령어 모드로 이동하려면 ESC를 누르면 된다.  



#### 3. 커서 이동하기

코드를 줄줄 쓰다보면 커서를 이동해야 할 일이 생긴다. 오타를 발견했다든지 하면 지금 작성 중인 부분에서 뒤든 앞이든 커서를 옮겨가야 하는데 커서를 옮기는 방법은 명령어 모드로 바꾼 후(ESC 누르면 됨) H부터 L중 원하는 방향으로 이동하면 된다.  

H는 왼쪽 J는 아래쪽 K는 위쪽 L은 오른쪽이다. 커서를 이동하고 있으면 게임하는 느낌이 든다. 재밌음.  



#### 4. 라인 이동하기

만약 100줄 번째 코드를 짰는데 2번 째 줄로 가야한다면? K를 98번 눌러야 할까?  

이런 일이 없도록 한 번에 특정 라인으로 이동할 수 있는 명령어가 있다. 편집을 하고 있는 상태에서 ESC를 눌러 명령어 모드로 바꾼 후 :과 이동할 라인을 누르면 된다.  

예를 들어 2번째 줄로 가고 싶다면 :2를 누르면 되는 것이다.  

TIP. 만약 라인 번호를 보고 싶다면 :set number를 입력하면 된다.  (라인 번호가 보기 싫어지면 :set nonumber 입력하면 됨)



#### 5. 내용 삭제하기

삭제도 명령어 모드에서 실행한다.  현재 커서가 있는 곳을 기준으로 삭제를 할 수 있음.  

- 글자 삭제

  x를 입력하면 된다. 그러면 커서 위치에 있는 글자가 삭제된다.

- 단어 삭제

  dw를 입력하면 된다. delete word란 뜻.  

  커서가 있는 곳부터 단어 끝까지를 삭제한다.  

- 라인 삭제

  dd를 입력하면 된다. dd가 무슨 의미인지 찾아보니 그냥 delete entire current line이라 나온다. (... d는 그렇다 치고 두 번째 d는 뭘까?)  

  커서가 있는 곳부터 라인 끝까지를 삭제하고 싶다면 D를 입력하면 된다.

#### 6. UNDO하기 & 잘붙과 복붙

원치 않는 삭제가 이뤄졌을 때 부활시키려면 u 명령어를 입력한다.  

만약 잘라 붙여넣기를 하고 싶다면 삭제 후에 원하는 곳으로 커서를 이동시켜 p 명령어를 쓴다. put의 의미지만 교수님께서 요즘말로 paste의 의미라고 하셨다.  

잘붙이 아니라 라인 전체를 복붙하고 싶다면 Y 명령어로 라인을 복사한 후 커서를 이동시켜 원하는 위치로 이동한 후 p를 쓰면 된다. 여기서 Y는 yank의 의미. Y 대신 yy도 가능하다.  

TIP. p는 붙여넣기 할 때 커서 기준으로 뒤에 붙여넣는다. 만약 커서 앞에 붙여넣기 하고 싶다면 P를 쓰면 된다.  



TIP. 기본적으로 명령어를 n번 실행하려고 할 때 `n + 명령어`를 입력하면 된다. 5번 붙여넣기 하고 싶으면 `5p`를 입력하면 되고 단어 10개를 지우고 싶으면 `10dw`를 입력하면 된다.  



#### 7. 점 명령어

. 명령어는 이전에 실행한 명령어를 반복한다. dw를 입력해 단어를 삭제했는데 또 삭제하고 싶으면 .을 누르면 된다.  



#### 8. 특정 문자열 / 단어 찾기

특정 문자열이나 단어를 찾고 싶다면 / 를 누른 후 해당 문자열이나 단어를 입력한 후 엔터를 치면 된다. 그러면 해당 문자열이나 단어로 커서가 이동한다.  

만약 printf를 찾고 싶다면 `/printf` 입력 후 엔터를 치면 된다. 만약 printf가 파일 내에 여러 개 있다면? 그 다음 printf를 찾고 싶을 땐 n을 누르면 된다. (next의 의미)  

만약 대문자 N을 입력하면 현재 위치에서 위로 이동한다.  

TIP. / 대신 ?을 입력해도 된다. 대신 위로 올라가면서 찾음. (/는 아래로 내려가며 찾음)

  

TIP. 커서를 라인 끝으로 이동시키려면 $를 입력하면 됨.  가장 앞으로 이동하는 건 0을 입력하면 된다.  



#### 9. 저장하기

편집을 마친 후 파일을 저장하고 싶다면 명령어 모드로 바꾼 후`:wq`나 `:w`를 입력하면 된다.    

`:wq`는 저장 후 나가기고 `:w`는 저장만 한다.

저장 안하고 그냥 나가기는 `:q!`를 입력한다.

대신 `:q`를 쓸 수도 있는데 이 명령어를 쓸 수 있는 경우는 편집한 내용이 아무 것도 없을 때다. 만약 편집한 내용이 있는 상태에서 `:q`를 입력하면 No write since last change 메시지가 뜨며 나갈 수 없다. 이럴 땐 `:q!`를 써야 한다.  

나 나갈거야!!!!!를 어필하는 의미로 !를 붙이는 거다.  



만약 다른 이름으로 저장하고 싶다면 편집 후 명령어 모드에서 :w filename을 입력하면 된다.  이 경우 기존에 편집하던 파일은 저장되지 않으니 따로 저장을 해줘야 한다. (그냥 `:q`하면 메시지 뜸)  

ex. `:w b.c`  



















 







