---
layout: post
title:  "6주차 과제(W06-P) 회고"
date:   2020-10-10
author: MYOH(최은오)
categories: Dummy
---

이번 과제를 하며 느낀 개인적인 회고를 남긴다.  
과제 내용 요약 _"vscode로 리눅스 환경에 원격접속 + 직원 관리 시스템 CRUD 구현하기"_   
이번 시간에는 openSSH를 사용해 vscode로 이전 시간까지 열심히 설정한 우분투 가상 환경에 원격으로 접속해보고 직원 관리 시스템을 위한 CRUD 기능을 구현해보았다.

1. 새로 배운 내용
    - SSH와 openSSH  
        SSH란 Secure SHell의 약자로 보안이 강화된 원격접속 프로토콜이다. 패킷의 호스트 IP 주소를 바꾸어 해킹하는 IP Spoofing을 방지하는 기능을 제공한다. 기본적으로 22번 포트를 사용한다.
    - 원격접속의 정의  
        SSH 프로토콜을 이용해 암호화된 통신 세션을 컴퓨터 네트워크에 제공하는 컴퓨터 프로그램이다.  
        리눅스 환경에서 설치한다면 `sudo apt install openssh-server` 명령어로 설치한다.  
        보너스로 22번 포트 허용하는 방법은 `sudo ufw allow 22/tcp cooment "accept openSSH"` 이다. 저번에도 써봤으니 잘 기억해두자.  
    - MariaDB  
        mysql 기반 open source인 RDBMS다. 2012년 10월 10.0 버전을 출시하며 'mysql과는 다른 길을 걷겠다'는 것을 선포(?)했다.

2. 발생한 문제와 해결 과정
    - `if(mysqli_fetch_array($result) == false)` 했을 때 데이터가 2개 중 1개만 조회된 이유는?  
        first_name을 기준으로 검색 기능을 구현할 때, index.php에서 수정 or 삭제를 위해 emp_no를 입력할 때 존재하지 않는 데이터를 입력했을 경우 데이터가 존재하지 않음을 알기 위해서 mysqli_query() 의 결과값에 num_rows 값을 사용했다.  
        기본적으로 empty set, 즉 where에 쓴 조건에 해당하는 데이터가 존재하지 않으면 num_rows의 값에 0이 들어있고 데이터가 하나라도 있으면 1 이상이 들어있다. 그런데 처음에는 '데이터가 없음'을 판별하기 위해 다음처럼 코드를 짰다.  
        ```
        if(mysqli_fetch_array($result) == false){
            echo '데이터가 존재하지 않습니다.';
        }
        else{
            while($row = mysqli_fetch_array($result) == false) {
                데이터 처리 과정...
            }
        }
        ```
        그런데 이렇게 했더니 이름 검색창에 'anthony'를 검색했을 때 first_name 값으로 anthony가 포함되어 있는 row가 2개 존재함에도 데이터가 하나만 조회되었다. first_name값으로 'tony'가 포함된 row가 하나 있는 경우면 'tony'를 검색했을 때 그 하나의 row가 조회되어야 하는데 아무 데이터도 뜨지 않았다. 왜일까?  


        값을 하나씩 출력해가며 문제를 해결했다. 처음 if에서 한 번 mysqli_fetch_array()를 처리한다. 'anthony'를 예로 들면 일단 첫 번재 'anthony'가 포함된 row가 처리된다. 그 다음 else의 while문에서 'anthony'가 포함된 row를 조회하여 처리하는데 이 while문에서는 두 번째 'anthony'부터 $row 변수에 담긴다. 그러니 원래는 데이터가 2개인데 막상 검색해 조회해보면 조건에 맞는 데이터가 2개가 아닌 1개만 출력되는 것이었다.  

    - object에서 속성에 접근하기는 `[]` 가 아닌 `->` 입니다.  
        mysqli_query()의 결과는 object다. 그래서 array처럼 대괄호를 사용해 접근할 수 없다. 대괄호로 값을 추출하려고 하면 오류가 난다. 위에서 작성한 것처럼 mysqli_query()의 결과값에 접근하려면 object의 속성에 접근하는 방법인 -> 를 사용해야 한다. 즉 num_rows란 속성에 접근하려면  
        ```
        $result = mysqli_query($link, $query);
        $result -> num_rows;
        ```  
        두 번째 줄 처럼 -> 를 사용해 접근해야 한다. 전에도 발생한 문제와 해결 과정에 이와 비슷한 내용을 기록한 것 같은데 그새 까먹어서 또 찾아봤기에 이번에 한 번 더 남긴다.  
3. 참고할 만한 내용  
    [isset과 empty 차이점](https://akal.co.kr/?p=1777)  
    if else 결과에 따라 다른 html을 띄울 수 없을까하는 방법을 찾던 중 Django처럼 empty 템플릿 태그같은 것이 php에도 있나 찾아보다가 발견한 내용인데 흥미로워서 남긴다.  
    isset은 기본적으로 변수에 값이 있느냐를 체크하는 함수로 NULL과 그 외로 분류된다. empty는 변수에 값이 비어있느냐를 체크하는 함수로 NULL, 숫자 0, 빈문자열 "" 과 그 외로 분류된다. 즉 empty에서는 NULL = 0 = "" 모두 True를 반환한다.  
4. 회고
  - 좋았던 점(+)  
    이 전까지는 내가 직접 데이터를 몇 가지 넣어서 테스트를 해왔는데 이번에는 공개되어 있는 데이터를 사용해 실습하고 테스트를 해봤다. 10만 개가 넘는 데이터를 처음으로 다뤄봤고 데이터가 너무 많아 메모리를 초과했다는 메시지도 처음으로 봤다. 이렇게 많은 양의 데이터를 다뤄볼 수 있어서 재미있는 경험이었다. 또한 스스로 문제점을 찾아 해결해보는 것을 과제로 수행했는데 어떤 문제점을 어떻게 고칠지 고민하는 과정도 재미있었다. 특히 이름으로 검색창을 구현할 때 sql문에 %를 사용했는데 예전에 배웠던 내용을 상기해볼 수 있어서 좋았다.  
  - 아쉬웠던 점(-)  
    3가지 문제점을 해결했지만 해결한 방식이 과연 적합한 방식인지 확신이 들지 않는다. 특히 emp_no의 값을 사용자가 고려해야 하는 상황을 해결하기 위해 가장 마지막 emp_no의 값에 +1한 값을 사용자가 새로 등록하려는 데이터의 emp_no의 값으로 처리를 했다. 그래서 사용자는 emp_no를 입력하지 않아도 된다.  
    이 기능은 DBMS에서 auto_increment 속성과 거의 같다. 사용자가 입력하지 않아도 (기본적으로) +1한 값을 저장하니까. 그런데 row를 삭제할 때 생각해보면 내가 만든 기능은 emp_no가 50인 row를 삭제하고 새로 데이터를 등록하려고 하면 emp_no의 값으로 50을 준다. 가장 마지막 emp_no = 49이고 +1한 값은 50이니까. 그런데 보통 auto_increment를 생각하면 emp_no가 50인 row를 삭제하고 새로 데이터를 등록하려고 하면 emp_no로 51을 저장한다. 무엇이 더 값을 관리하는데 있어 일관성/유효성 면에서 좋을까? 그것을 아직 잘 모르겠다.  
  - 새로 알게된 점(!)  
    리눅스 환경에서 root가 아닌 사용자 계정 test에 /var/www 폴더에 대한 권한을 부여하는 방법은 `sudo chown -R test.test /var/www`이다.  
    html에서 자동으로 닫는 태그를 생성하는 auto clse tag 확장이 있다.  
    ★매우 유용하다.★  
  - 과제 영상  
    이번 주 과제의 시뮬레이션 영상을 첨부한다.  
    [과제 영상 보러가기](https://www.youtube.com/watch?v=r1R_6tvUEqI&feature=youtu.be)