---
layout: post
title:  "오늘의 일지"
date:   2021-02-08
author: MYOH(최은오)
categories: WinterInternship
---

1. 오늘은 프로젝트 관련 DB와 통신하는 메서드 중 project update메서드를 수정했습니다. 이전에 프로젝트 테이블에 도구와 과제 성격, 사업 지역 column을 추가했는데 project를 조회하고 생성하는 메서드에는 이 세 가지 column을 처리할 수 있도록 했지만 update 메서드에는 아직 적용이 안되어 있어 update 메서드에서도 세 가지 column을 처리할 수 있도록 하였습니다. 프로젝트 수정 페이지에서도 세 가지 column을 parameter로 받을 수 있도록 처리했습니다.  

2. 직급 기록 삭제 기능을 손봤습니다.

   인사 관리에서 직급 기록을 삭제하는 use case는 세 가지를 떠올려볼 수 있습니다. 2개 이상 직급 중 이미 종료된 직급을 삭제하는 경우, 2개 이상 직급 중 현재 진행 중인 직급을 삭제하는 경우, 그리고 1개 뿐인 직급을 삭제하는 경우. 여기서 마지막 경우는 직급 기록을 삭제해서는 안됩니다. 퇴사자의 경우는 상관없지만 1개 뿐인 직급 기록인데 그 직급이 현재 진행 중인 경우 현재 회사에서 일하고 있는 직원의 직급 기록을 삭제하게 되는 것이기 때문입니다. 인턴 중인 제 '인턴' 직급을 없앤다면 저는 직급도 없는 ??? 상태가 되는 것이지요. 그래서 직급 정보가 1개밖에 없을 경우 삭제하지 못하도록 인사 관리 페이지의 코드를 수정했습니다.  

   인사 관리 페이지의 html 구조는 단순하게 아래와 같습니다.  

   ```html
   <form>
       <table>
           -- 입사일과 퇴사일 정보
       </table>
       <table>
          -- 입사 이후 직급 정보 -- 
       </table>
   </form>
   ```

   입사일과 퇴사일 정보에선 퇴사일을 지정해 퇴사처리를 할 수 있고 입사 이후 직급 정보에서는 제가 수정한 직급 기록을 삭제하거나 해당 직급을 끝낼 날짜를 지정해 저장할 수 있습니다. 문제는 위 두 개의 table을 한 개의 form으로 처리한다는 것인데 입사 이후 직급 정보를 삭제하는 button을 직급 정보 별로 만들었을 때 삭제 버튼을 누르면 원치 않게 form이 submit되는 것이었습니다. 삭제 button으로는 삭제 처리만 하면 되는데 말이죠! 그런데 인터넷에서 아주 좋은 팁을 얻었습니다.  

   [FORM 안에 존재하는 BUTTON 클릭시 SUBMIT 동작 방지](http://blog.freezner.com/archives/807)  

   정리하면 button은 기본적으로 submit 속성을 가지고 있어 이를 방지하고 just 버튼의 역할만 하려면 type으로 button을 지정해줘야 한다는 것입니다. `<button type="button"></button>` 이렇게 말이죠!  

   직급 정보를 삭제하는 button에 타입을 명시해주고 클릭 시 삭제하는 url로 이동시키는 이벤트를 연결해주니 form이 submit되지 않고 삭제 url로 잘 이동합니다. 타입만으로도 원하는 동작을 제어할 수 있다니, 너무 다행스럽습니다. 처음에는 기존 구조를 완전히 수정해야 하나 했는데 말이죠.

3. 권한 view 페이지에 대한 피드백을 받았습니다. 

   UI는 이 정도면... 괜찮고... 아 만족스럽습니다. so so~ 칭찬도 이렇게나 기분이 좋습니다. 하지만 예상했던 문제는 역시나 빗나가지 않았습니다. 권한 view 페이지는 마치 개발자가 릴리즈 노트를 작성하듯 텍스트를 직접 작성해 보여주는 형태입니다. 시스템의 권한 설정이 바뀌면 view 페이지의 텍스트도 수동으로 수정해줘야 한다는 것입니다. 시스템과 연동된 형태로 권한을 확인하고 수정할 수 있어야 한다는 요구사항을 듣고 마음을 굳게 먹었습니다. 아, 큰 작업이 되겠구나!  

   주간보고를 작성할 수 없던 직급이 작성할 수 있어야 하고, 실적보고를 수정할 수 없던 직급이 수정할 수 있게 만들어야 합니다. 직급 별로 menu 마다 CRUD 권한이 어떻게 되는지를 DB에 저장해야 합니다. table 구조 설계는 다 해서 내일 팀원들에게서 의견을 들어볼 생각입니다. 시스템과 연동하여 권한을 편집할 수 있게 만들기, 이번주의 핵심 목표입니다.

   